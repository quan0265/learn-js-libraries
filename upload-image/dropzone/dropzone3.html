

<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <title>Đăng tin cho thuê - Chothuephongtro.me</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="_token" content="OIVZcPwWO23TVOxXkXvVyrZt1urjzkYZuVz79DGL">
    <link rel="canonical" href="https://chothuephongtro.me/dang-tin.html" />
    <meta prefix="og: http://ogp.me/ns#" property="og:url" content="https://chothuephongtro.me/dang-tin.html" />
    <meta name="geo.region" content="VN" />
    <base href="https://chothuephongtro.me/">
    <link rel="stylesheet" href="/css/3rd/normalize.css">
    <link rel="stylesheet" href="/css/3rd/select2.min.css">
    <link rel="stylesheet" href="/css/3rd/toastr.min.css">
    <link rel="stylesheet" href="/css/3rd/sweetalert2.min.css">
    <link rel="stylesheet" href="/css/chothuephongtro.desktop.css?v=20210407">
    <link rel="stylesheet" href="/css/chothuephongtro.desktop.dashboard.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="msapplication-config" href="/browserconfig.xml">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1C63AA">
    <meta name="theme-color" content="#1C63AA">
    <script type="text/javascript">
    window.Laravel = { "csrfToken": "OIVZcPwWO23TVOxXkXvVyrZt1urjzkYZuVz79DGL", "base_url": "https:\/\/chothuephongtro.me" };
    var base_url = "https://chothuephongtro.me";
    var base_api_url = "https://chothuephongtro.me/api";
    var estate_id = "8}";
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61644228-15"></script>
    <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-61644228-15'); </script>
</head>

<body class="page_dangtin logged windows">
    <div id="webpage">
        <header id="header-bar">
            <div class="inner">
                <div id="logo"><a href="https://chothuephongtro.me">chothuephongtro.me</a></div>
                <nav id="navbar123">
                    <ul class="lv1 clearfix">
                        <li class="has-sub"><a href="https://chothuephongtro.me/ho-chi-minh.html" title="Cho thuê phòng trọ Hồ Chí Minh">Hồ Chí Minh</a>
                            <ul class="lv2">
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-1.html" title="Cho thuê phòng trọ Quận 1">Quận 1</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-2.html" title="Cho thuê phòng trọ Quận 2">Quận 2</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-3.html" title="Cho thuê phòng trọ Quận 3">Quận 3</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-4.html" title="Cho thuê phòng trọ Quận 4">Quận 4</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-5.html" title="Cho thuê phòng trọ Quận 5">Quận 5</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-6.html" title="Cho thuê phòng trọ Quận 6">Quận 6</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-7.html" title="Cho thuê phòng trọ Quận 7">Quận 7</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-8.html" title="Cho thuê phòng trọ Quận 8">Quận 8</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-9.html" title="Cho thuê phòng trọ Quận 9">Quận 9</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-10.html" title="Cho thuê phòng trọ Quận 10">Quận 10</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-11.html" title="Cho thuê phòng trọ Quận 11">Quận 11</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-12.html" title="Cho thuê phòng trọ Quận 12">Quận 12</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-binh-tan.html" title="Cho thuê phòng trọ Bình Tân">Bình Tân</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-binh-thanh.html" title="Cho thuê phòng trọ Bình Thạnh">Bình Thạnh</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-go-vap.html" title="Cho thuê phòng trọ Gò Vấp">Gò Vấp</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-phu-nhuan.html" title="Cho thuê phòng trọ Phú Nhuận">Phú Nhuận</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-tan-binh.html" title="Cho thuê phòng trọ Tân Bình">Tân Bình</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-thu-duc.html" title="Cho thuê phòng trọ Thủ Đức">Thủ Đức</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/quan-tan-phu.html" title="Cho thuê phòng trọ Tân Phú">Tân Phú</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/huyen-binh-chanh.html" title="Cho thuê phòng trọ Bình Chánh">Bình Chánh</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/huyen-cu-chi.html" title="Cho thuê phòng trọ Củ Chi">Củ Chi</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/huyen-hoc-mon.html" title="Cho thuê phòng trọ Hóc Môn">Hóc Môn</a></li>
                                <li><a href="https://chothuephongtro.me/ho-chi-minh/huyen-nha-be.html" title="Cho thuê phòng trọ Nhà Bè">Nhà Bè</a></li>
                            </ul>
                        </li>
                        <li class="has-sub"><a href="https://chothuephongtro.me/ha-noi.html" title="Cho thuê phòng trọ Hà Nội">Hà Nội</a>
                            <ul class="lv2">
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-ba-dinh.html" title="Cho thuê phòng trọ Ba Đình">Ba Đình</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-bac-tu-liem.html" title="Cho thuê phòng trọ Bắc Từ Liêm">Bắc Từ Liêm</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-cau-giay.html" title="Cho thuê phòng trọ Cầu Giấy">Cầu Giấy</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-dong-da.html" title="Cho thuê phòng trọ Đống Đa">Đống Đa</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-ha-dong.html" title="Cho thuê phòng trọ Hà Đông">Hà Đông</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-hai-ba-trung.html" title="Cho thuê phòng trọ Hai Bà Trưng">Hai Bà Trưng</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-hoan-kiem.html" title="Cho thuê phòng trọ Hoàn Kiếm">Hoàn Kiếm</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-hoang-mai.html" title="Cho thuê phòng trọ Hoàng Mai">Hoàng Mai</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-long-bien.html" title="Cho thuê phòng trọ Long Biên">Long Biên</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-nam-tu-liem.html" title="Cho thuê phòng trọ Nam Từ Liêm">Nam Từ Liêm</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-tay-ho.html" title="Cho thuê phòng trọ Tây Hồ">Tây Hồ</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/quan-thanh-xuan.html" title="Cho thuê phòng trọ Thanh Xuân">Thanh Xuân</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/huyen-hoai-duc.html" title="Cho thuê phòng trọ Hoài Đức">Hoài Đức</a></li>
                                <li><a href="https://chothuephongtro.me/ha-noi/huyen-thanh-tri.html" title="Cho thuê phòng trọ Thanh Trì">Thanh Trì</a></li>
                            </ul>
                        </li>
                        <li class="has-sub"><a href="https://chothuephongtro.me/da-nang.html" title="Cho thuê phòng trọ Đà Nẵng">Đà Nẵng</a>
                            <ul class="lv2">
                                <li><a href="https://chothuephongtro.me/da-nang/huyen-hoa-vang.html" title="Cho thuê phòng trọ Hòa Vang">Hòa Vang</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-cam-le.html" title="Cho thuê phòng trọ Cẩm Lệ">Cẩm Lệ</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-hai-chau.html" title="Cho thuê phòng trọ Hải Châu">Hải Châu</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-lien-chieu.html" title="Cho thuê phòng trọ Liên Chiểu">Liên Chiểu</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-ngu-hanh-son.html" title="Cho thuê phòng trọ Ngũ Hành Sơn">Ngũ Hành Sơn</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-son-tra.html" title="Cho thuê phòng trọ Sơn Trà">Sơn Trà</a></li>
                                <li><a href="https://chothuephongtro.me/da-nang/quan-thanh-khe.html" title="Cho thuê phòng trọ Thanh Khê">Thanh Khê</a></li>
                            </ul>
                        </li>
                        <li><a href="/blog.html" title="Blog">Blog</a></li>
                    </ul>
                </nav>
                <div id="user-header-bar" class="js-reload-html-header clearfix">
                    <ul class="guest clearfix">
                        <li><a rel="nofollow" style="color: #fff;" href="https://chothuephongtro.me/dang-ky.html">Đăng ký</a> / <a rel="nofollow" style="color: #fff;" href="https://chothuephongtro.me/dang-nhap.html">Đăng nhập</a></li>
                    </ul>
                    <ul>
                        <li>
                            <div class="btn-wrap"><a rel="nofollow" class="btn-dangtin" href="https://chothuephongtro.me/dang-tin.html">Đăng tin miễn phí</a></div>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <main id="main" class="container">
            <div id="breadcrumb">
                <ol class="clearfix">
                    <li><a href="https://chothuephongtro.me"><span>Trang chủ</span></a></li>
                    <li><a href="https://chothuephongtro.me/dashboard/index.html"><span>quan</span></a></li>
                    <li><span>Đăng tin cho thuê</span></li>
                </ol>
            </div>
            <div class="w700">
                <section class="section">
                    <div class="section-header"><span class="section-title big">Đăng tin mới</span></div>
                </section>
                <form class="form_dangtin js-form-submit-data js-validator" data-action-url="https://chothuephongtro.me/api/post/create">
                    <section class="section">
                        <div class="section-header"><span class="section-title">Khu vực</span></div>
                        <div class="section-content">
                            <div class="form-group"><label for="select_province" class="label-title">Tỉnh thành</label><select class="form-control js-select-tinhthanhpho js_select2_filter_with_searchbox" name="province_id" required min="1" data-msg-required="Bạn chưa chọn tỉnh thành">
                                    <option value="">Chọn tỉnh thành</option>
                                    <option value="1">Hồ Chí Minh</option>
                                    <option value="2">Hà Nội</option>
                                    <option value="4">Đà Nẵng</option>
                                </select></div>
                            <div class="form-group"><label for="select_district" class="label-title">Quận huyện</label><select class="form-control js-select-quanhuyen js_select2_filter_with_searchbox" name="district_id" data-choose-text="Chọn quận huyện" required min="1" data-msg-required="Bạn chưa chọn quận huyện" data-msg-min="Bạn chưa chọn quận huyện">
                                    <option value="">Chọn quận huyện</option>
                                </select></div>
                            <div class="form-group"><label for="select_district" class="label-title">Phường xã</label><select class="form-control js-select-phuongxa js_select2_filter_with_searchbox" name="ward_id" data-choose-text="Chọn phường xã">
                                    <option value="">Chọn phường xã</option>
                                </select></div>
                            <div class="form-group"><label for="select_district" class="label-title">Đường phố</label><select class="form-control js-select-duong js_select2_filter_with_searchbox" name="street_id" data-choose-text="Chọn đường phố">
                                    <option value="">Chọn đường phố</option>
                                </select></div>
                            <div class="form-group"><label class="label-title">Số nhà</label><input type="text" id="street_number" class="form-control js-input-street-number" name="street_number"></div>
                            <div class="form-group"><label class="label-title">Địa chỉ</label><input type="text" readonly="readonly" id="address" class="form-control js-input-diachi" name="address" required data-msg-required="Bạn chưa nhập địa chỉ"></div>
                            <div class="form-group"><label class="label-title">Vị trí trên bản đồ</label>
                                <div class="js-maps" style="height:200px; width: 100%; background-color: #f1f1f1;"><iframe width="100%" height="100%" style="border:0" loading="lazy" allowfullscreen src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAZNwkP9_EUTf2EgfAzWHhu7JzHDM0fass&q=Hồ+Chí+Minh"></iframe></div>
                            </div>
                        </div>
                    </section>
                    <section class="section">
                        <div class="section-header"><span class="section-title">Thông tin mô tả</span></div>
                        <div class="section-content">
                            <div class="form-group"><label class="label-title">Tiêu đề</label><textarea class="form-control js-title" name="title" id="title" rows="2" required="" minlength="30" maxlength="100" data-msg-required="Bạn chưa nhập tiêu đề" data-msg-minlength="Tiêu đề quá ngắn" data-msg-maxlength="Tiêu đề quá dài"></textarea></div>
                            <div class="form-group"><label for="content" class="label-title">Nội dung mô tả</label><textarea class="form-control js-content" name="content" id="editor" rows="5" required minlength="50" data-msg-required="Bạn chưa nhập nội dung" data-msg-minlength="Nội dung tối thiểu 50 kí tự"></textarea></div>
                            <div class="form-group"><label for="price" class="label-title">Giá cho thuê</label>
                                <div class="input-group"><input type="text" id="price" name="price" class="form-control js-price" required minlength="1" data-msg-required="Bạn chưa nhập giá" data-msg-minlength="Bạn chưa nhập giá">
                                    <div class="input-group-append"><span class="input-group-text" name="price" id="price">vnđ</span></div>
                                </div>
                            </div>
                            <div class="form-group"><label for="acreage" class="label-title">Diện tích phòng trọ</label>
                                <div class="input-group"><input type="text" id="dien_tich" name="dien_tich" class="form-control js-dien-tich" required min="1" data-msg-required="Bạn chưa nhập diện tích" data-msg-min="Bạn chưa nhập diện tích">
                                    <div class="input-group-append"><span class="input-group-text js-acreage" id="">m<sup>2</sup></span></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="section">
                        <div class="section-header"><span class="section-title">Hình ảnh phòng trọ</span></div>
                        <div class="section-content">
                            <div class="form-group">
                                <div for="browse_photos" class="browse_photos js-dropzone dz-clickable"><i class="icon-upload-image"></i><span class="js-btn-chon-anh">Chọn Ảnh</span></div>
                            </div>
                            <div class="list-photos-upload clearfix dropzone-previews js-list-photos" id="list-photos-dropzone-previews"></div>
                            <div id="tpl" style="display:none">
                                <div class="photo_item js-photo-manual">
                                    <div class="photo"><img data-dz-thumbnail /></div>
                                    <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
                                    <div class="bottom clearfix"><span class="photo_delete" data-dz-remove><i></i> Xóa</span></div><input name="" value="" type="hidden" />
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="section">
                        <div class="section-header">
                            <div class="section-title">Video</div>
                        </div>
                        <div class="section-content">
                            <div class="form-group"><label for="youtube_url" class="label-title">Video Link (Youtube)</label><input id="youtube_url" type="text" name="youtube_url" class="form-control"></div>
                        </div>
                        <p>Hoặc</p>
                        <div class="section-content">
                            <div class="form-group">
                                <div for="browse_photos" class="browse_photos js-dropzone-video"><i class="icon-upload-video"></i><span class="js-btn-chon-video">Chọn video</span></div>
                            </div>
                            <div class="list-photos-upload clearfix dropzone-previews" id="list-videos-dropzone-previews"></div>
                            <div id="tpl-video" style="display:none">
                                <div class="photo_item col-md-2 col-3 js-video-manual">
                                    <div class="photo"><video width="100%" height="100%" controls id="video">
                                            <source src="" /></video></div>
                                    <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
                                    <div class="bottom clearfix"><span class="photo_delete" data-dz-remove><i data-feather="trash-2"></i> Xóa</span></div><input name="" value="" type="hidden" />
                                </div>
                            </div>
                        </div>
                    </section>
                    <div class="dashboard-bar"><button type="submit" class="btn complete js-btn-hoan-tat">Hoàn tất <i></i></button></div><input type="hidden" name="map_lat" id="map_lat" /><input type="hidden" name="map_long" id="map_long" /><input type="hidden" name="action" id="action" value="add_new_post" />
                </form>
            </div>
        </main>
        <footer id="footer">
            <div class="container">
                <div class="inner">
                    <ul class="footer-link">
                        <li><a href="/gioi-thieu.html">Giới thiệu</a></li>
                        <li><a href="/quy-dinh-su-dung.html">Quy định sử dụng</a></li>
                        <li><a href="/lien-he.html">Liên hệ</a></li>
                    </ul>
                    <div class="company">
                        <p><strong>CÔNG TY TNHH LBKCORP</strong></p>
                        <p>CSKH: 08.39.202.123</p>
                        <p>Copyright © 2022 chothuephongtro.me</p>
                        <p>Địa chỉ: LE-4.07, Toà nhà Lexington Residence, Số 67 Mai Chí Thọ, Phường An Phú, Quận 2, Tp. Hồ Chí Minh.</p>
                        <p>Giấy phép đăng ký kinh doanh số 0313588502 do Sở kế hoạch và Đầu tư thành phố Hồ Chí Minh cấp ngày 24 tháng 12 năm 2015.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script src="/js/3rd/jquery.min.js"></script>
    <script src="/js/3rd/popper.min.js"></script>
    <script src="/js/3rd/bootstrap.min.js"></script>
    <script src="/js/3rd/select2.full.min.js"></script>
    <script src="/js/3rd/sweetalert2.min.js"></script>
    <script src="/js/3rd/jquery.validate.min.js"></script>
    <script src="/js/3rd/lozad.min.js"></script>
    <script src="/js/3rd/jquery.countdown.min.js"></script>
    <script src="/js/3rd/toastr.min.js"></script>
    <script src="/js/3rd/jquery.validate.min.js"></script>
    <script src="/js/3rd/dropzone.min.js"></script>
    <script src="/js/3rd/sortable.min.js"></script>
    <script src="/js/3rd/feather.min.js"></script>
    <script>
    feather.replace();
    </script>
    <script type="text/javascript">
    var is_page_dangtin = true;
    </script>
    <script src="/js/3rd/jquery.validate.min.js"></script>
    <script src="/js/3rd/jquery-ui.min.js"></script>
    <script src="/js/3rd/sortable.min.js"></script>
    <script src="/js/google-map-dangtin.js"></script>
    <script src="/js/chothuephongtro.common.js?v=20221123"></script>
    <!-- <script src="/js/chothuephongtro.frontend.js?v=20221123"></script> -->
<script type="text/javascript">

var front_app = front_app || {};
front_app = {
	body: $(document.body),
	Window: $(window),
    is_requesting: false,
    content_changed: false,
    user:{
        userLogin: function () {
            $(".js-login-form").on("submit", function (e) {
                e.preventDefault();
                var _self = $(this);
                var btn_submit = _self.find('button[type="submit"]');
                var btn_submit_text = btn_submit.html();
                btn_submit.html('Đang xử lý...');

                $.ajax({
                    url: base_url + "/user/login",
                    data: _self.serialize(),
                    type: "POST",
                    dataType: "json",
                    success:function(){
                        btn_submit.html(btn_submit_text);
                    }
                });
            });
        },
        userRegister: function () {
            $(".js-register-form").on("submit", function (e) {
                e.preventDefault();
                var _self = $(this);
                var btn_submit = _self.find('button[type="submit"]');
                var btn_submit_text = btn_submit.html();
                btn_submit.html('Đang xử lý...');
                $.ajax({
                    url: base_url + "/user/register",
                    data: _self.serialize(),
                    type: "POST",
                    dataType: "json",
                    success:function(){
                        btn_submit.html(btn_submit_text);
                    }
                });
            });
        },
        userEdit: function(){
            $('#select_avatar_photo').on('change', function(){
                common_app.readImageFromInput(this, $('#avatar_photo'));
            });
        },
        forgotPassword: function () {
            var action_url, phone_or_email;

            // send email/sdt để lấy mã xác nhận
            $(".js-forget-password-first-step").on("submit", function (e) {
                e.preventDefault();

                var _self = $(this);
                action_url = _self.attr("data-action");
                phone_or_email = _self.find(".js-input-phone-or-email").val();
                _self.find(".js-forgot-password-next-step").html("Đang xử lý...");
                var data_next_step = _self
                    .find(".js-forgot-password-next-step")
                    .attr("data-next-step");

                $.ajax({
                    url: base_api_url+ '/user/send-token',
                    data: {
                        phone_or_email: phone_or_email
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.data_code == 200) {
                            $(".js-forgot-password-step.active").addClass("deactive");
                            $(".js-forgot-password-step.step_" + data_next_step)
                                .find(".js-alert-message")
                                .html(data.message);
                            setTimeout(function () {
                                $(".js-forgot-password-step").removeClass("active");
                                $(".js-forgot-password-step.step_" + data_next_step).addClass(
                                    "active"
                                );
                            }, 100);
                        }
                    }
                });
            });

            // verify mã xác nhận đúng hay không
            $(".js-forget-password-second-step").on("submit", function (e) {
                e.preventDefault();

                var _self = $(this);
                var verify_code = _self.find(".js-input-verify-code").val();
                var data_next_step = _self
                    .find(".js-forgot-password-next-step")
                    .attr("data-next-step");
                $.ajax({
                    url: base_api_url+ '/user/verify-token',
                    data: {
                        verify_code: verify_code,
                        phone_or_email: phone_or_email
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.data_code == 200) {
                            $(".js-forgot-password-step.active").addClass("deactive");
                            setTimeout(function () {
                                $(".js-forgot-password-step").removeClass("active");
                                $(".js-forgot-password-step.step_" + data_next_step).addClass(
                                    "active"
                                );
                            }, 100);
                        }
                    }
                });
            });

            $(".js-forget-password-third-step").on("submit", function (e) {
                e.preventDefault();

                var _self = $(this);
                var password = _self.find(".js-newpassword").val();
                var cf_password = _self.find(".js-confirm-newpassword").val();
                var verify_code = $(".js-input-verify-code").val();
                if (password != cf_password) {
                    alert("Mật khẩu xác nhận không đúng");
                    return;
                }
                var data_next_step = _self
                    .find(".js-forgot-password-next-step")
                    .attr("data-next-step");
                $.ajax({
                    url: base_api_url+'/user/update-password',
                    data: {
                        verify_code: verify_code,
                        password: password,
                        cf_password: cf_password,
                        phone_or_email: phone_or_email
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.data_code == 200) {
                            $(".js-forgot-password-step.active").addClass("deactive");
                            setTimeout(function () {
                                $(".js-forgot-password-step").removeClass("active");
                                $(".js-forgot-password-step.step_" + data_next_step).addClass(
                                    "active"
                                );
                            }, 100);
                        }
                    }
                });
            });

            // gửi lại mã xác nhận trường hợp không nhận được, hay lỡ xóa hay sao đó
            $(".js-btn-resend-token").on("click", function (e) {
                e.preventDefault();

                var $btn = $(this).button("loading");
                // business logic...
                $.ajax({
                    url: action_url,
                    data: {
                        phone_or_email: phone_or_email,
                        resend: 1
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.code == 200) {
                            $btn.button("reset");
                        }
                    }
                });
			});
        },
        verifyAccount: function () {
            var phone_number;

            $(".js-btn-get-verify-code").on("click", function (e) {
                e.preventDefault();

                if(front_app.is_requesting) return;
                front_app.is_requesting = true;
                var _self = $(this);
                phone_number = $(".js-input-phone").val();
                var data_action_url = _self.attr("data-action-url");

                if (!phone_number || ! validatePhone(phone_number)) {
                    toastr.error("Vui lòng nhập đúng Format số điện thoại: Vd 0981234567 hoặc 012341234567", "Lỗi");
                    return;
                }

                $.ajax({
                    url: data_action_url,
                    data: {
                        phone: phone_number,
                        action: "verify"
                    },
                    type: "POST",
                    dataType: "json",
                    success:function(res){
                        front_app.is_requesting = false;
                    },
                    error:function(res){
                        front_app.is_requesting = false;
                    }
                });
            });

            $(".js-btn-verify").on("click", function (e) {
                e.preventDefault();

                var _self = $(this);
                var data_action_url = _self.attr("data-action-url");
                var verify_code = $(".js-input-verify-code").val();
                var redirect_to = $("#redirect_to").val();
                phone_number = $(".js-input-phone").val();

                if (!verify_code) {
                    toastr.error("Bạn hãy nhập mã xác nhận để tiếp tục.", "Lỗi");
                    return;
                }

                $.ajax({
                    url: data_action_url,
                    data: {
                        verify_code: verify_code,
                        phone_or_email: phone_number,
                        action: "verify",
                        redirect_to: redirect_to
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.data_code == 200) {
                            
                        }
                    }
                });
            });

            var from = $('.js-verify-input-phone').attr('data-from-page');
            if(from == 'r' && phone_number != ''){
                $(".js-btn-get-verify-code").trigger('click');
            }
        },
        reloadHtmlHeader: function () {            
            if($('.js-reload-html-header').length == 0) return;
            var action_url = base_url + "/api/refresh/header";
    
            $.ajax({
                url: action_url,
                type: "POST",
                dataType: "json"
            });
        },
        init:function(){
            this.reloadHtmlHeader();
            this.userLogin();
            this.userRegister();
            this.userEdit();
            this.forgotPassword();
            this.verifyAccount();
        },
    },
    accountKit:{
		loginCallback: function(response) {
		
			if (response.status === "PARTIALLY_AUTHENTICATED") {
				$('.js-login-form-sms').find('.code').val(response.code);
				$('meta[name="_token"]').attr('content', response.state);

				toastr.info('Đăng nhập thành công.');
				if (self.is_requesting) return;
				self.is_requesting = true;

				var action_url = $('.js-login-form-sms').attr("data-action-url");
				if (!action_url) return;

                var _self = $('.js-login-form-sms');
                var button_text = _self.find(".js-btn-hoan-tat").html();

				$.ajax({
					url: action_url,
					data: _self.serialize(),
					type: "POST",
					dataType: "json",
					beforeSend: function () {
						_self.find(".js-btn-hoan-tat").text("Đang xử lí...");
					},
					success: function (data) {
                        _self.find(".js-btn-hoan-tat").html(button_text);
						self.is_requesting = false;
					},
					error: function (data) {
                        _self.find(".js-btn-hoan-tat").html(button_text);
						self.is_requesting = false;
					}
				});
			}else if (response.status === "NOT_AUTHENTICATED") {
				// handle authentication failure
				toastr.info('Đăng nhập không thành công.');
			}else if (response.status === "BAD_PARAMS") {
				// handle bad parameters
				toastr.info('Bạn vui lòng kiểm tra thông tin và thử lại.');
			}
		},
		smsLogin: function(){
			var countryCode = '+84';
			var phoneNumber = $('.js-login-form-sms').find('.phone').val();
			if(phoneNumber.substr('0',1) === '0'){
				phoneNumber = phoneNumber.substr(1, 9);
			}
			if(phoneNumber.substr(0, 2) === '84'){
				phoneNumber = '+'+phoneNumber;
            }
            
			phoneNumber = phoneNumber.replace(/\s/g,'');
			phoneNumber = phoneNumber.replace('+','');

			AccountKit.login(
				'PHONE',
				{countryCode: countryCode, phoneNumber: phoneNumber},
				this.loginCallback
			);
		},
		init: function(){
			var self = this;
			$('.js-login-form-sms').find('.js-btn-hoan-tat').on('click', function(e){
				e.preventDefault();

				if($(this).hasClass('disabled')) return;
				self.smsLogin();
			});
		}
	},
    dang_tin:{
        images:[],
        layout:function(){
            var self = this;
            //
            $('.js-frm-manage-post .js-title').donetyping(function(event){
                if($(this).val() == '') {
                    front_app.content_changed = false;
                    return;
                }
                front_app.content_changed = true;
                var title = $(this).val();
                var character = parseInt(title.length);
                $('.js-title-count-character').html(character);

                // verify title
                var _self = $(this);
                $.ajax({
                    url:base_api_url+'/validate/post/title',
                    data:{title:title},
                    method:'POST',
                    type:'JSON',
                    success:function(response){
                        if(response.error){
                            if($('#title-error').length){
                                $('#title-error').html(response.message);
                            }else{
                                _self.parent().append('<label id="title-error" class="error">'+response.message+'</label>');
                            }
                        }else{
                            $('#title-error').html('');
                        }
                        //<label id="title-error" class="error js-error hidden">Tiêu đề này đã được sử dụng</label>
                    }
                });
            }, 250);

            $('.js-frm-manage-post .js-title').donetyping(function(event){
                if($(this).val() == '') {
                    front_app.content_changed = false;
                    return;
                }
                front_app.content_changed = true;
            }, 250);

        },
        generateTitle: function(){
            var title = 'Cho thuê phòng trọ';
            var address = $('.js-input-diachi').val();
            var toilet = $('.js-select-toilet').val();
            var bedroom = $('.js-select-bedroom').val();
            var price = $('.js-price').val();
            var dien_tich = $('.js-dien-tich').val();
            var selected_project = '';//$('.js-select-project').select2('data')[0];
            if(selected_project && selected_project.id != ''){
                title += ' '+selected_project.text;
            }else{
                if(address != ''){
                    title += ' '+address;
                }
            }

            if(toilet && toilet !=''){
                title += ', '+toilet+'WC';
            }
            
            if(bedroom && bedroom !=''){
                title += ', '+bedroom+'PN';
            }

            if(price != ''){
                price = parseFloat(price.replace(/\s/g,'').replace(/\./g,''));
                if(price > 1000000){
                    title += ', giá '+(price/1000000)+'tr đồng/tháng';
                }else{
                    title += ', giá '+price+' đồng/tháng';
                }
            }
            
            if(dien_tich != ''){    
                dien_tich = parseFloat(dien_tich.replace(/\s/g,'').replace(/\./g,''));
                title += ', DT '+dien_tich+' m2';
            }

            //$('.js-title').val(title);
        },
        uploadImage: function(){
            if(typeof Dropzone === 'undefined') return;
            if($('.js-dropzone').length ==0) return;

            // INIT DROPZONE
            var self = this;
            var btn_submit = $(".js-form-submit-data").find('button[type="submit"]');
            var btn_submit_title = btn_submit.html();
            var dropzoneOptions = { 
                url: "https://static123.com/api/upload",
                previewsContainer:'.js-list-photos',
                maxFiles: 20,
                maxFilesize:10,
                previewTemplate: $('#tpl').length > 0 ? document.querySelector('#tpl').innerHTML : '',
                dictRemoveFileConfirmation:"Bạn chắc chắn muốn xóa hình ảnh này?"
            };

            var myDropzone = new Dropzone(".js-dropzone", dropzoneOptions);

            // Bind manual remove
            $('.js-photo-manual').each(function (index, element) {
                $(element).find('span[data-dz-remove]').on('click', function(event){
                    var _self = $(this);
                    if (myDropzone.options.dictRemoveFileConfirmation) {
                        return Dropzone.confirm(myDropzone.options.dictRemoveFileConfirmation, function() {
                            _self.closest('.js-photo-manual').remove();
                        });
                    }else{
                        $(this).closest('.js-photo-manual').remove();
                    }
                });
            });

            myDropzone.on('sending', function(file, xhr, formData){
                formData.append('source', 'chothuephongtro');
                btn_submit.addClass('disabled');
                btn_submit.html('Đang đăng hình...');
            });

            myDropzone.on("addedfile", function(file, response) {
                if($('.js-photo-manual').length > 4){
                    swal('Lỗi', 'Bạn chỉ được đăng tải 4 hình ảnh. Vui lòng xóa để đăng lại', 'error');
                    myDropzone.removeFile(file);
                    return;
                }
            });

            myDropzone.on("success", function(file, response) {
                //
                self.images.push(file);
                var el_preview = $(file.previewElement);
                el_preview.append('<input type="hidden" name="image_linked['+response.id+']" value="'+response.image_path+'"/>');
            });
            
            myDropzone.on("complete", function(file) {
                btn_submit.removeClass('disabled');
                btn_submit.html(btn_submit_title);
            });

            // $(".list_photos").sortable();
            var sel = document.getElementById('list-photos-dropzone-previews');
		    // var sortable = Sortable.create(sel, {'delayOnTouchOnly':true, 'delay':200});	
            var sortable = Sortable.create(sel);

        },
        uploadVideo: function(){
            if(typeof Dropzone === 'undefined') return;
            if($('.js-dropzone-video').length ==0) return;
            // INIT DROPZONE
            var self = this;
            var btn_submit = $(".js-form-submit-data").find('button[type="submit"]');
            var btn_chon_anh = $('.js-btn-chon-video');
            var btn_chon_anh_text = btn_chon_anh.html();
            var btn_submit_text = btn_submit.html();
            var dropzoneOptions = { 
                url: "https://static123.com/api/upload",
                maxFiles: 1,
                maxFilesize:100,
                acceptedFiles:".mov,.mp4",
                previewsContainer:'#list-videos-dropzone-previews',
                previewTemplate: $('#tpl-video').length > 0 ? document.querySelector('#tpl-video').innerHTML : '',
                dictRemoveFileConfirmation:"Bạn chắc chắn muốn xóa video này?"
            };

            var myDropzone = new Dropzone(".js-dropzone-video", dropzoneOptions);

            // Bind manual remove
            var _window_with = $(document).width();
            var _action = 'click';
            if(_window_with <= 480){
                _action = 'touchstart tap';
            }
            $('#list-videos-dropzone-previews').on(_action, '.js-video-manual .photo_delete', function(event){			
                var _self = $(this);

                if (myDropzone.options.dictRemoveFileConfirmation) {
                    return Dropzone.confirm(myDropzone.options.dictRemoveFileConfirmation, function() {
                        _self.closest('.js-video-manual').remove();
                    });
                }else{
                    $(this).closest('.js-video-manual').remove();
                }
            });

            myDropzone.on('error', function(file){
                swal('Lỗi', 'Bạn chỉ được đăng tải 1 video. Vui lòng xóa để đăng lại', 'error');
                myDropzone.removeFile(file);
            });

            myDropzone.on('sending', function(file, xhr, formData){
                formData.append('source', 'chothuephongtro');
                formData.append('source_url', 'window.location.href');
                btn_submit.addClass('disabled');
                btn_chon_anh.html('Đang đăng video...');
                btn_submit.html('Đang đăng video...');
            });

            myDropzone.on("success", function(file, response) {
                //
                var el_preview = $(file.previewElement);
                el_preview.find('#video > source').attr('src', response.video_url);
                el_preview.append('<input type="hidden" name="video" value="'+response.video_url+'"/>');
                document.querySelector('#video').load();
            });

            myDropzone.on("addedfile", function(file, response) {
                // var el_preview = $(file.previewElement);
                // el_preview.find('#video > source').attr('src', file.url);
                // el_preview.append('<input type="hidden" name="video" value="'+response.path_url+'"/>');
                // document.querySelector('#video').load();
                var _video = $('#video').attr('data-video');
                if(_video){
                    swal('Lỗi', 'Bạn chỉ được đăng tải 1 video. Vui lòng xóa để đăng lại', 'error');
                    myDropzone.removeFile(file);
                    return;
                }
            });
            
            myDropzone.on("complete", function(file) {
                btn_submit.removeClass('disabled');
                btn_chon_anh.html(btn_chon_anh_text);
                btn_submit.html(btn_submit_text);
            });

        },
        init: function(){
            this.layout();
            this.uploadImage();
            this.uploadVideo();
        }
    },
    search:{
        form_search_and_filter:'.js-frm-search-form-filter',
        layout:function(){
            var self = this;

            $(self.form_search_and_filter).on('submit', function(e){
                e.preventDefault();
                return false;
            });
            
            $(self.form_search_and_filter).find('.js-btn-filter').on('click',function(){
                $.ajax({
					type: "POST",
					url: base_url + '/api/filter',
					data: $(self.form_search_and_filter).serialize(),
					dataType: 'json'
				});
            });
        },
        init:function(){
            this.layout();
        }
    },
    preventBrowserClose: function(){
        window.onbeforeunload = function(event) {
            console.log(front_app.content_changed);
            if(front_app.content_changed){
                event.preventDefault();
                event.returnValue = 'Bạn có chắc muốn rời khỏi trang này?';
                return 'Bạn có chắc muốn rời khỏi trang này?';
            }
            
        }
    },
    calculatorReadmore: function(){
        $('.js-btn-readmore').on('click', function(e){
            e.preventDefault();

            $('.js-bottom-content').removeClass('has-readmore');
        });
    },
    processSubmitFormFront: function () {
        if(!$(".js-form-submit-data").length) return;
		var self = this;
		$(".js-form-submit-data").each(function(index, el){
            $(el).on("submit", function (event) {
                event.preventDefault();
                //if(!$(this).valid()) return;
                front_app.content_changed = false;
    
                if (self.is_requesting) return;
                self.is_requesting = true;
    
                var action_url = $(this).attr("data-action-url");
                if (!action_url) return;
    
                var _self = $(this);
                var html_button = _self.find(".js-btn-hoan-tat").html();
    
                var formData = new FormData(this);
    
                $.ajax({
                    url: action_url,
                    data: formData,
                    processData: false,
                    contentType: false, 
                    type: "POST",
                    dataType: "json",
                    beforeSend: function () {
                        _self.find(".js-btn-hoan-tat").text("Đang xử lí...");
                    },
                    success: function (data) {
                        _self.find(".js-btn-hoan-tat").html(html_button);
                        self.is_requesting = false;
                    },
                    error: function (data) {
                        _self.find(".js-btn-hoan-tat").html(html_button);
                        self.is_requesting = false;
                    }
                });
            });
        });
        
        $(".js-form-submit-data").validate({
            submitHandler: function(form, event) {
                event.preventDefault();

                if (self.is_requesting) return;
                self.is_requesting = true;

                var _self = $(form);
                var action_url = _self.attr("data-action-url");
                if (!action_url) return;

                var html_button = _self.find(".js-btn-hoan-tat").html();
                var formData = new FormData(_self);

                $.ajax({
                    url: action_url,
                    data: formData,
                    processData: false,
                    contentType: false, 
                    type: "POST",
                    dataType: "json",
                    beforeSend: function () {
                        _self.find(".js-btn-hoan-tat").text("Đang xử lí...");
                    },
                    success: function (data) {
                        _self.find(".js-btn-hoan-tat").html(html_button);
                        self.is_requesting = false;
                    },
                    error: function (data) {
                        _self.find(".js-btn-hoan-tat").html(html_button);
                        self.is_requesting = false;
                    }
                });
                //form.submit();
            },
            errorPlacement: function($error, $element) {
                var input_group = $element.closest('.input-group');
                var el_parent = input_group.length > 0 ? input_group.parent() : $element.parent();
                $error.appendTo(el_parent);
            }
        });

    },
    fixFacebookLogin: function () {
		if (!window.location.hash || window.location.hash !== '#_=_')
			return;
		if (window.history && window.history.replaceState)
			return window.history.replaceState('', document.title, window.location.pathname + window.location.search);
		// Prevent scrolling by storing the page's current scroll offset
		var scroll = {
			top: document.body.scrollTop,
			left: document.body.scrollLeft
		};
		window.location.hash = "";
		// Restore the scroll offset, should be flicker free
		document.body.scrollTop = scroll.top;
		document.body.scrollLeft = scroll.left;
	},
	layoutFront: function () {
        var self = this;
        // INIT SLIDE
        if(typeof Swiper !== 'undefined'){
            new Swiper('.swiper-container', {
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                },
                navigation: {
                  nextEl: '.swiper-button-next',
                  prevEl: '.swiper-button-prev',
                },
            });
        }

        // INIT PRICE
        $('.js-price').donetyping(function(event){
            var price = $(this).val().replace(/\s/g,'');
            price = price.replace(/\./g,'');
            price = parseFloat(price).formatDot();
            $(this).val(price);
            self.dang_tin.generateTitle();
        }, 50);


        $('.js-hamburger-button, .panel-backdrop').click(function(e){
            e.preventDefault();
            
            self.body.toggleClass('active-menu-mobile');
        });
        
    },
    reloadPostSaved: function () {
        if($('.js-btn-save').length == 0) return;

		var data_post_ids = [];
		$(".js-btn-save").each(function (index, el) {
			var post_id = $(el).attr("data-post-id");
			if (data_post_ids.indexOf(post_id) < 0) {
				data_post_ids.push(post_id);
			}
		});

		$.ajax({
			url: base_url + "/api/post/check/save",
			data: {
				data_post_ids: data_post_ids
			},
			type: "POST",
			dataType: "json"
		});
	},
    postLikable: function () {
		$(".js-btn-save").on("click", function (e) {
			e.preventDefault();

			var _self = $(this);
			var post_id = $(this).attr("data-post-id");
			var status = "saved";
			if (_self.hasClass("saved")) {
				status = "unsaved";
			}

			// không show loading
			window.show_loading = false;

			$.ajax({
				url: base_api_url + "/post/save",
				data: {
					post_id: post_id,
					action: status
				},
				type: "POST",
				dataType: "json",
				success: function (data) {
					$(".js-btn-save").each(function (index, el) {
						if ($(el).attr("data-post-id") == post_id) {
							$(el).find("span").html(data.button_text);
							$(el).attr("data-original-title", data.button_text);

							// add class save
							if (status == "saved") {
								$(el).addClass("saved");
							} else {
								$(el).removeClass("saved");
								if ($(el).closest(".js-post-item-saved").length) {
									$(el)
										.closest(".js-post-item-saved")
										.fadeOut(1000, function () {
											$(this).remove();
										});
								}
							}
						}
					});
				}
			});
		});
	},
    init: function(){
        this.layoutFront();
        this.calculatorReadmore();
        this.processSubmitFormFront();
        this.fixFacebookLogin();
        this.reloadPostSaved();
        this.postLikable();
        this.preventBrowserClose();
        this.dang_tin.init();
        this.user.init();
        this.search.init();
        this.accountKit.init();
    }
}; 

$(document).ready(function () {
    var jBody = $(document.body);

	if (jBody.hasClass("loaded")) return;
	jBody.addClass("loaded");

    front_app.init();
});
</script>
</body>

</html>



